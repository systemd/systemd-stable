# SPDX-License-Identifier: LGPL-2.1-or-later

# This is a settings file for OS image generation using mkosi (https://github.com/systemd/mkosi).
# Symlink this file to mkosi.default in the project root directory and invoke "mkosi" to build an OS image.

[Distribution]
Distribution=opensuse
Release=tumbleweed

[Content]
# We install gawk, gzip, grep, xz, sed, rsync and docbook-xsl-stylesheets here explicitly so that the busybox
# versions don't get installed instead.
Packages=
        device-mapper
        diffutils
        distribution-release
        docbook-xsl-stylesheets
        gawk
        grep
        gzip
        btrfs-progs
        dbus-1
        f2fs-tools
        fuse
        gcc # Provides libasan/libubsan
        glibc-32bit
        glibc-locale-base
        libasound2
        libbpf1
        libcap-ng0
        libcrypt1
        libcryptsetup12
        libdw1
        libelf1
        libfido2
        libgcrypt20
        libglib-2_0-0
        libkmod2
        liblz4-1
        libmnl0
        libmount1
        libnuma1
        libp11-kit0
        libpopt0
        libqrencode4
        libseccomp2
        libxkbcommon0
        pam
        python3-pefile
        shadow
        libtss2-esys0
        libtss2-mu0
        libtss2-rc0
        libtss2-tcti-device0
        # Workaround for CI issue with our stub getting overwritten
        systemd-boot
        rsync
        sed
        tpm2-0-tss
        vim

BuildPackages=
        alsa-devel
        audit-devel
        bpftool
        dbus-1-devel
        dwarves
        fdupes
        fuse-devel
        gcc-32bit
        gcc-c++
        glib2-devel
        glibc-devel-32bit
        glibc-devel-static-32bit
        glibc-locale
        glibc-static
        intltool
        libacl-devel
        libapparmor-devel
        libblkid-devel
        libbpf-devel
        libbz2-devel
        libcap-devel
        libcap-ng-devel
        libcryptsetup-devel
        libcurl-devel
        libdw-devel
        libelf-devel
        libfdisk-devel
        libfido2-devel
        libgcrypt-devel
        libgnutls-devel
        libkmod-devel
        liblz4-devel
        libmicrohttpd-devel
        libmnl-devel
        libmount-devel
        libnuma-devel
        libpwquality-devel
        libseccomp-devel
        libselinux-devel
        libxkbcommon-devel
        libxslt-tools
        openssl-devel
        pam-devel
        pciutils-devel
        pcre-devel
        popt-devel
        python3-docutils
        python3-Jinja2
        python3-lxml
        python3-pytest
        qrencode-devel
        shadow
        system-group-obsolete
        system-user-bin
        system-user-daemon
        system-user-nobody
        system-user-root
        systemd-sysvinit
        timezone
        tpm2-0-tss-devel
        xen-devel
        zlib-devel
